<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1d4ed8">
  <link rel="icon" type="image/png" sizes="192x192" href="logo1.png">
  <link rel="apple-touch-icon" href="logo1.png">
  <title>Cairo University CMP Batch 2029</title>

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* üåô Dark Mode Styling */
    body.dark {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: #f8fafc;
    }
    body.dark nav { background: #0f172a; }
    body.dark footer { background: #0f172a; color: #cbd5e1; }
    body.dark .tab-btn { color: #cbd5e1; }
    body.dark .tab-btn.active { color: #38bdf8; }
    body.dark .news-card,
    body.dark table {
      background: #1e293b;
      color: #f1f5f9;
      border: 1px solid #334155;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    body.dark th { background: #334155 !important; color: #f8fafc; }
    body.dark td { border-color: #475569; }
    body.dark input {
      background: #334155;
      color: #f8fafc;
      border: 1px solid #475569;
    }
    body.dark input::placeholder { color: #94a3b8; }
    body.dark #darkToggle {
      background: #38bdf8;
      color: #0f172a;
      font-weight: bold;
    }
    body.dark tbody td {
      color: #f8fafc !important;
    }
    body.dark, 
    body.dark h1, 
    body.dark h2, 
    body.dark h3, 
    body.dark h4, 
    body.dark h5, 
    body.dark p, 
    body.dark a, 
    body.dark button, 
    body.dark td, 
    body.dark th, 
    body.dark label, 
    body.dark span, 
    body.dark li {
      color: #f8fafc !important;
    }
    body.dark .bg-white {
      color: #1d4ed8 !important;
    }
    body, nav, footer, .news-card, table, th, td, input {
      transition: background 0.5s ease, color 0.5s ease, border-color 0.5s ease;
    }
    button, a {
      transition: all 0.3s ease;
    }
    button:hover, a:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }
    .tab-btn {
      position: relative;
      transition: color 0.3s ease;
    }
    .tab-btn::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -2px;
      width: 0%;
      height: 2px;
      background: #2563eb;
      transition: width 0.3s ease;
    }
    .tab-btn:hover::after,
    .tab-btn.active::after {
      width: 100%;
    }
    .tab-content {
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .tab-content:not(.hidden) {
      opacity: 1;
    }
  </style>
</head>
<body class="bg-gray-50 font-sans transition-colors duration-500">

  <!-- ‚úÖ Navbar -->
  <nav class="bg-blue-600 text-white shadow-lg">
    <div class="container mx-auto flex flex-col sm:flex-row sm:justify-between sm:items-center p-4 space-y-2 sm:space-y-0">
      <h1 id="siteTitle" class="text-xl sm:text-2xl font-bold text-center sm:text-left">
        CMP Cairo University - Batch 2029
      </h1>
      <div class="flex flex-wrap justify-center sm:justify-end gap-2">
        <button id="contactBtn" class="bg-white text-blue-600 px-3 py-1 rounded-lg shadow-md">üì© Contact</button>
        <button id="langToggle" class="bg-white text-blue-600 px-3 py-1 rounded-lg shadow-md">üåê ÿπÿ±ÿ®Ÿä</button>
        <button id="darkToggle" class="bg-white text-blue-600 px-3 py-1 rounded-lg shadow-md">üåô Dark Mode</button>
      </div>
    </div>
  </nav>

  <!-- ‚úÖ Hero Section -->
  <section class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-16 sm:py-20 px-4">
    <div class="container mx-auto text-center">
      <h2 id="heroTitle" class="text-2xl sm:text-4xl font-extrabold mb-4">
        Welcome to CMP Batch 2029 Website
      </h2>
      <p id="heroDesc" class="text-base sm:text-lg mb-6">
        Stay updated with the latest news, schedules, and deadlines of our batch
      </p>
      <a href="#news" id="heroBtn" class="bg-white text-blue-700 px-6 py-3 rounded-full font-semibold shadow-md transition">Explore Now</a>
    </div>
  </section>

  <!-- ‚úÖ Tabs -->
  <div class="container mx-auto mt-10 px-4">
    <div class="flex flex-wrap border-b border-gray-300 justify-center gap-2">
      <button class="tab-btn active px-4 py-2 text-blue-600 font-semibold" data-tab="news" id="tabNews">News</button>
      <button class="tab-btn px-4 py-2 text-gray-600 hover:text-blue-600" data-tab="schedule" id="tabSchedule">Today's Schedule</button>
      <button class="tab-btn px-4 py-2 text-gray-600 hover:text-blue-600" data-tab="deadlines" id="tabDeadlines">Deadlines</button>
    </div>

    <!-- ‚úÖ News -->
    <div id="news" class="tab-content">
      <div class="flex justify-between items-center mb-4 mt-6 flex-col sm:flex-row gap-2">
        <h2 id="newsTitle" class="text-xl font-bold">üì¢ Latest News</h2>
        <input type="text" id="searchNews" placeholder="üîç Search news..." class="px-3 py-2 border rounded-lg w-full sm:w-1/3">
      </div>
      <div id="newsList" class="grid md:grid-cols-2 gap-4"></div>
    </div>

    <!-- ‚úÖ Schedule -->
    <div id="schedule" class="tab-content hidden mt-6">
      <h2 id="scheduleTitle" class="text-xl font-bold mb-4">üìÖ Today's Schedule</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full bg-white shadow-lg rounded-2xl overflow-hidden">
          <thead class="bg-blue-600 text-white">
            <tr>
              <th id="courseTh" class="py-2 px-4 text-center">Course</th>
              <th id="timeTh" class="py-2 px-4 text-center">Time</th>
              <th id="locationTh" class="py-2 px-4 text-center">Location</th>
            </tr>
          </thead>
          <tbody class="text-gray-700 text-center"></tbody>
        </table>
      </div>
    </div>

    <!-- ‚úÖ Deadlines -->
    <div id="deadlines" class="tab-content hidden mt-6">
      <h2 id="deadlinesTitle" class="text-xl font-bold mb-4">‚è∞ Deadlines</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full bg-white shadow-lg rounded-2xl overflow-hidden">
          <thead class="bg-red-600 text-white">
            <tr>
              <th id="dCourse" class="py-2 px-4 text-center">Course</th>
              <th id="dTask" class="py-2 px-4 text-center">Task</th>
              <th id="dDeadline" class="py-2 px-4 text-center">Deadline</th>
            </tr>
          </thead>
          <tbody class="text-gray-700 text-center"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ‚úÖ Footer -->
  <footer class="bg-gray-800 text-white mt-16 p-6 text-center">
    <p id="footerText"> Batch 2029 - Fady Fawzy</p>
  </footer>

  <!-- ‚úÖ Contact Modal -->
  <div id="contactModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 w-80 text-center">
      <h2 class="text-xl font-bold mb-4 dark:text-white">üì© Contact Owner</h2>
      <p class="mb-2 text-gray-700 dark:text-gray-300">
        <strong>Email:</strong><br>
        <a href="mailto:fady.fawzy2006@gmail.com" class="text-blue-600 underline">fady.fawzy2006@gmail.com</a>
      </p>
      <p class="mb-4 text-gray-700 dark:text-gray-300">
        <strong>Phone:</strong><br>
        <a href="tel:01204788242" class="text-blue-600 underline">01204788242</a>
      </p>
      <button id="closeContact" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700">Close</button>
    </div>
  </div>

  <!-- ‚úÖ Scripts -->
  <script>
    const sheetIDs = {
      en: "1rhIC3O9J06LEGJElaaXrp9U3k1BTlszALeaw9PZP0vo",
      ar: "1BF9-_-zzHZMBWOdYDRN7-GF9GLPX1DP9iwTD58JTQPo"
    };

    let currentLang = "en";
    let currentSheetID = sheetIDs.en;

    // Tabs
    const tabs = document.querySelectorAll(".tab-btn");
    const contents = document.querySelectorAll(".tab-content");
    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        tabs.forEach(t => t.classList.remove("text-blue-600", "active"));
        tab.classList.add("text-blue-600", "active");
        contents.forEach(c => c.classList.add("hidden"));
        document.getElementById(tab.dataset.tab).classList.remove("hidden");
      });
    });

    // Dark mode
    const darkBtn = document.getElementById("darkToggle");
    if (localStorage.getItem("theme") === "dark") {
      document.body.classList.add("dark");
      darkBtn.textContent = "‚òÄÔ∏è Light Mode";
    }
    darkBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark");
      const isDark = document.body.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
      darkBtn.textContent = isDark ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
    });

    // Contact modal
    const contactBtn = document.getElementById("contactBtn");
    const contactModal = document.getElementById("contactModal");
    const closeContact = document.getElementById("closeContact");
    contactBtn.addEventListener("click", () => {
      contactModal.classList.remove("hidden");
      contactModal.classList.add("flex");
    });
    closeContact.addEventListener("click", () => {
      contactModal.classList.add("hidden");
      contactModal.classList.remove("flex");
    });
    contactModal.addEventListener("click", (e) => {
      if (e.target === contactModal) {
        contactModal.classList.add("hidden");
        contactModal.classList.remove("flex");
      }
    });

    // Language switch
    const translations = {
      en: { siteTitle:"CMP Cairo University - Batch 2029", heroTitle:"Welcome to Batch 2029 Website", heroDesc:"Stay updated with the latest news, schedules, and deadlines of our batch", heroBtn:"Explore Now", tabNews:"News", tabSchedule:"Today's Schedule", tabDeadlines:"Deadlines", newsTitle:"üì¢ Latest News", scheduleTitle:"üìÖ Today's Schedule", deadlinesTitle:"‚è∞ Deadlines", courseTh:"Course", timeTh:"Time", locationTh:"Location", dCourse:"Course", dTask:"Task", dDeadline:"Deadline", footerText:"¬© 2025 All Rights Reserved -  Batch 2029 - Fady Fawzy" },
      ar: { siteTitle:"ÿ≠ÿßÿ≥ÿ®ÿßÿ™ ÿßŸÑŸÇÿßŸáÿ±ÿ© - ÿØŸÅÿπÿ© 2029", heroTitle:"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉŸÖ ŸÅŸä ŸÖŸàŸÇÿπ ÿØŸÅÿπÿ© 2029", heroDesc:"ÿ™ÿßÿ®ÿπ ÿ£ÿ≠ÿØÿ´ ÿßŸÑÿ£ÿÆÿ®ÿßÿ± ŸàÿßŸÑÿ¨ÿØÿßŸàŸÑ ŸàÿßŸÑŸÖŸàÿßÿπŸäÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ÿßŸÑÿÆÿßÿµÿ© ÿ®ÿßŸÑÿØŸÅÿπÿ©", heroBtn:"ÿßÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ", tabNews:"ÿßŸÑÿ£ÿÆÿ®ÿßÿ±", tabSchedule:"ÿ¨ÿØŸàŸÑ ÿßŸÑŸäŸàŸÖ", tabDeadlines:"ÿßŸÑŸÖŸàÿßÿπŸäÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©", newsTitle:"üì¢ ÿ¢ÿÆÿ± ÿßŸÑÿ£ÿÆÿ®ÿßÿ±", scheduleTitle:"üìÖ ÿ¨ÿØŸàŸÑ ÿßŸÑŸäŸàŸÖ", deadlinesTitle:"‚è∞ ÿßŸÑŸÖŸàÿßÿπŸäÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©", courseTh:"ÿßŸÑŸÖŸÇÿ±ÿ±", timeTh:"ÿßŸÑŸàŸÇÿ™", locationTh:"ÿßŸÑŸÖŸÉÿßŸÜ", dCourse:"ÿßŸÑŸÖŸÇÿ±ÿ±", dTask:"ÿßŸÑŸÖŸáŸÖÿ©", dDeadline:"ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä", footerText:"¬© 2025 ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ© -  ÿØŸÅÿπÿ© 2029 - ŸÅÿßÿØŸä ŸÅŸàÿ≤Ÿä " }
    };
    const langBtn = document.getElementById("langToggle");
    function updateLang(lang) {
      for (let key in translations[lang]) {
        const el = document.getElementById(key);
        if (el) el.textContent = translations[lang][key];
      }
      document.documentElement.setAttribute("lang", lang);
      document.documentElement.setAttribute("dir", lang === "ar" ? "rtl" : "ltr");
      currentSheetID = sheetIDs[lang];
      loadAllData();
    }
    langBtn.addEventListener("click", () => {
      currentLang = currentLang === "en" ? "ar" : "en";
      updateLang(currentLang);
      langBtn.textContent = currentLang === "en" ? "üåê ÿπÿ±ÿ®Ÿä" : "üåê English";
    });
    updateLang(currentLang);

    // Load data from Google Sheets
    async function loadSheet(sheetName) {
      const url = `https://docs.google.com/spreadsheets/d/${currentSheetID}/gviz/tq?tqx=out:json&sheet=${sheetName}`;
      const res = await fetch(url);
      const text = await res.text();
      const json = JSON.parse(text.substring(47).slice(0, -2));
      return json.table.rows.map(r => r.c.map(c => c ? (c.f ?? c.v ?? "") : ""));
    }
    function loadAllData() {
      loadSheet("News").then(rows => {
        const newsList = document.getElementById("newsList");
        let allNews = rows;
        renderNews(rows);
        document.getElementById("searchNews").addEventListener("input", e => {
          const q = e.target.value.toLowerCase();
          const filtered = allNews.filter(r => (r[0] + " " + r[1]).toLowerCase().includes(q));
          renderNews(filtered);
        });
        function renderNews(list) {
          newsList.innerHTML = "";
          list.forEach(r => {
            if (r[0]) {
              const card = document.createElement("div");
              card.className = "news-card bg-white shadow-lg rounded-2xl p-4";
              card.innerHTML = `<h3 class="font-semibold">${r[0]}</h3><p class="text-gray-600 mt-2">${r[1]}</p>`;
              newsList.appendChild(card);
            }
          });
        }
      });
      loadSheet("Schedule").then(rows => {
        const body = document.querySelector("#schedule tbody");
        body.innerHTML = "";
        rows.forEach(r => {
          body.innerHTML += `<tr class="border-b">
            <td class="py-2 px-4 text-center">${r[0]}</td>
            <td class="py-2 px-4 text-center">${r[1]}</td>
            <td class="py-2 px-4 text-center">${r[2]}</td></tr>`;
        });
      });
      loadSheet("Deadlines").then(rows => {
        const body = document.querySelector("#deadlines tbody");
        body.innerHTML = "";
        rows.forEach(r => {
          body.innerHTML += `<tr class="border-b">
            <td class="py-2 px-4 text-center">${r[0]}</td>
            <td class="py-2 px-4 text-center">${r[1]}</td>
            <td class="py-2 px-4 text-center">${r[2]}</td></tr>`;
        });
      });
    }
    loadAllData();

    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js")
        .then(() => console.log("Service Worker registered"))
        .catch(err => console.log("SW registration failed:", err));
    }
  </script>
</body>
</html>







