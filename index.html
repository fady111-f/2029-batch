<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1d4ed8">
  <link rel="icon" type="image/png" sizes="192x192" href="logo1.png">
  <link rel="apple-touch-icon" href="logo1.png">

  <title>Cairo University CMP Batch 2029</title>

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ğŸŒ™ Dark Mode Styling */
    body.dark {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: #f8fafc;
    }
    body.dark nav { background: #0f172a; }
    body.dark footer { background: #0f172a; color: #cbd5e1; }
    body.dark .tab-btn { color: #cbd5e1; }
    body.dark .tab-btn.active { color: #38bdf8; }
    body.dark .news-card,
    body.dark table {
      background: #1e293b;
      color: #f1f5f9;
      border: 1px solid #334155;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    body.dark th { background: #334155 !important; color: #f8fafc; }
    body.dark td { border-color: #475569; }
    body.dark input {
      background: #334155;
      color: #f8fafc;
      border: 1px solid #475569;
    }
    body.dark input::placeholder { color: #94a3b8; }
    body.dark #darkToggle {
      background: #38bdf8;
      color: #0f172a;
      font-weight: bold;
    }

    /* âœ¨ Ù†ØµÙˆØµ Ø¹Ø§Ù…Ø© ØªÙƒÙˆÙ† ÙØ§ØªØ­Ø© ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
    body.dark, 
    body.dark h1, 
    body.dark h2, 
    body.dark h3, 
    body.dark h4, 
    body.dark h5, 
    body.dark p, 
    body.dark a, 
    body.dark button, 
    body.dark td, 
    body.dark th, 
    body.dark label, 
    body.dark span, 
    body.dark li {
      color: #f8fafc !important;
    }

    /* Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ù„Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ùˆ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø°Ø§Øª Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ */
    body.dark .bg-white {
      color: #1d4ed8 !important;
    }

    /* âœ¨ Transition Animations Ø¨ÙŠÙ† Light / Dark */
    body, nav, footer, .news-card, table, th, td, input {
      transition: background 0.5s ease, color 0.5s ease, border-color 0.5s ease;
    }

    /* âœ¨ Buttons Hover Animations */
    button, a {
      transition: all 0.3s ease;
    }
    button:hover, a:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }

    /* âœ¨ Tabs Underline Animation */
    .tab-btn {
      position: relative;
      transition: color 0.3s ease;
    }
    .tab-btn::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -2px;
      width: 0%;
      height: 2px;
      background: #2563eb; /* Ø§Ù„Ø£Ø²Ø±Ù‚ */
      transition: width 0.3s ease;
    }
    .tab-btn:hover::after {
      width: 100%;
    }
    .tab-btn.active::after {
      width: 100%;
    }
  </style>
</head>
<body class="bg-gray-50 font-sans transition-colors duration-500">

  <!-- Navbar -->
  <nav class="bg-blue-600 text-white shadow-lg">
    <div class="container mx-auto flex justify-between items-center p-4">
      <h1 id="siteTitle" class="text-2xl font-bold">CMP Cairo University - Batch 2029</h1>
      <div class="flex space-x-2">
        <button id="langToggle" class="bg-white text-blue-600 px-3 py-1 rounded-lg shadow-md">ğŸŒ Ø¹Ø±Ø¨ÙŠ</button>
        <button id="darkToggle" class="bg-white text-blue-600 px-3 py-1 rounded-lg shadow-md">ğŸŒ™ Dark Mode</button>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-20">
    <div class="container mx-auto text-center">
      <h2 id="heroTitle" class="text-4xl font-extrabold mb-4">Welcome to CMP Batch 2029 Website</h2>
      <p id="heroDesc" class="text-lg mb-6">Stay updated with the latest news, schedules, and deadlines of our batch</p>
      <a href="#news" id="heroBtn" class="bg-white text-blue-700 px-6 py-3 rounded-full font-semibold shadow-md transition">Explore Now</a>
    </div>
  </section>

  <!-- Tabs -->
  <div class="container mx-auto mt-10">
    <div class="flex border-b border-gray-300 justify-center space-x-4">
      <button class="tab-btn active px-4 py-2 text-blue-600 font-semibold" data-tab="news" id="tabNews">News</button>
      <button class="tab-btn px-4 py-2 text-gray-600 hover:text-blue-600" data-tab="schedule" id="tabSchedule">Today's Schedule</button>
      <button class="tab-btn px-4 py-2 text-gray-600 hover:text-blue-600" data-tab="deadlines" id="tabDeadlines">Deadlines</button>
    </div>

    <!-- Content -->
    <div class="mt-6">

      <!-- News -->
      <div id="news" class="tab-content">
        <div class="flex justify-between items-center mb-4">
          <h2 id="newsTitle" class="text-xl font-bold">ğŸ“¢ Latest News</h2>
          <input type="text" id="searchNews" placeholder="ğŸ” Search news..." class="px-3 py-2 border rounded-lg w-1/3">
        </div>
        <div id="newsList" class="grid md:grid-cols-2 gap-4"></div>
      </div>

      <!-- Schedule -->
      <div id="schedule" class="tab-content hidden">
        <h2 id="scheduleTitle" class="text-xl font-bold mb-4">ğŸ“… Today's Schedule</h2>
        <table class="min-w-full bg-white shadow-lg rounded-2xl overflow-hidden">
          <thead class="bg-blue-600 text-white">
            <tr>
              <th id="courseTh" class="py-2 px-4 text-center">Course</th>
              <th id="timeTh" class="py-2 px-4 text-center">Time</th>
              <th id="locationTh" class="py-2 px-4 text-center">Location</th>
            </tr>
          </thead>
          <tbody class="text-gray-700 text-center"></tbody>
        </table>
      </div>

      <!-- Deadlines -->
      <div id="deadlines" class="tab-content hidden">
        <h2 id="deadlinesTitle" class="text-xl font-bold mb-4">â° Deadlines</h2>
        <table class="min-w-full bg-white shadow-lg rounded-2xl overflow-hidden">
          <thead class="bg-red-600 text-white">
            <tr>
              <th id="dCourse" class="py-2 px-4 text-center">Course</th>
              <th id="dTask" class="py-2 px-4 text-center">Task</th>
              <th id="dDeadline" class="py-2 px-4 text-center">Deadline</th>
            </tr>
          </thead>
          <tbody class="text-gray-700 text-center"></tbody>
        </table>
      </div>

    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white mt-16 p-6 text-center">
    <p id="footerText">Â© 2025 All Rights Reserved - CMP Cairo University Batch 2029 - Fady Fawzy</p>
  </footer>

  <!-- Scripts -->
  <script>
    const sheetIDs = {
      en: "1rhIC3O9J06LEGJElaaXrp9U3k1BTlszALeaw9PZP0vo",
      ar: "1BF9-_-zzHZMBWOdYDRN7-GF9GLPX1DP9iwTD58JTQPo"
    };

    let currentLang = "en";
    let currentSheetID = sheetIDs.en;

    // Tabs
    const tabs = document.querySelectorAll(".tab-btn");
    const contents = document.querySelectorAll(".tab-content");
    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        tabs.forEach(t => t.classList.remove("text-blue-600", "active"));
        tab.classList.add("text-blue-600", "active");
        contents.forEach(c => c.classList.add("hidden"));
        document.getElementById(tab.dataset.tab).classList.remove("hidden");
      });
    });

    // Dark mode
    document.getElementById("darkToggle").addEventListener("click", () => {
      document.body.classList.toggle("dark");
    });

    // Language switch
    const translations = {
      en: {
        siteTitle: "CMP Cairo University - Batch 2029",
        heroTitle: "Welcome to Batch 2029 Website",
        heroDesc: "Stay updated with the latest news, schedules, and deadlines of our batch",
        heroBtn: "Explore Now",
        tabNews: "News",
        tabSchedule: "Today's Schedule",
        tabDeadlines: "Deadlines",
        newsTitle: "ğŸ“¢ Latest News",
        scheduleTitle: "ğŸ“… Today's Schedule",
        deadlinesTitle: "â° Deadlines",
        courseTh: "Course",
        timeTh: "Time",
        locationTh: "Location",
        dCourse: "Course",
        dTask: "Task",
        dDeadline: "Deadline",
        footerText: "Â© 2025 All Rights Reserved - CS Cairo University Batch 2029 - Fady Fawzy"
      },
      ar: {
        siteTitle: "Ø­Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© - Ø¯ÙØ¹Ø© 2029",
        heroTitle: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…ÙˆÙ‚Ø¹ Ø¯ÙØ¹Ø© 2029",
        heroDesc: "ØªØ§Ø¨Ø¹ Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙˆØ§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¯ÙØ¹Ø©",
        heroBtn: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†",
        tabNews: "Ø§Ù„Ø£Ø®Ø¨Ø§Ø±",
        tabSchedule: "Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…",
        tabDeadlines: "Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©",
        newsTitle: "ğŸ“¢ Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±",
        scheduleTitle: "ğŸ“… Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…",
        deadlinesTitle: "â° Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©",
        courseTh: "Ø§Ù„Ù…Ù‚Ø±Ø±",
        timeTh: "Ø§Ù„ÙˆÙ‚Øª",
        locationTh: "Ø§Ù„Ù…ÙƒØ§Ù†",
        dCourse: "Ø§Ù„Ù…Ù‚Ø±Ø±",
        dTask: "Ø§Ù„Ù…Ù‡Ù…Ø©",
        dDeadline: "Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ",
        footerText: "Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø­Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ø¯ÙØ¹Ø© 2029"
      }
    };

    const langBtn = document.getElementById("langToggle");

    function updateLang(lang) {
      for (let key in translations[lang]) {
        const el = document.getElementById(key);
        if (el) el.textContent = translations[lang][key];
      }
      document.documentElement.setAttribute("lang", lang);
      document.documentElement.setAttribute("dir", lang === "ar" ? "rtl" : "ltr");
      currentSheetID = sheetIDs[lang];
      loadAllData();
    }

    langBtn.addEventListener("click", () => {
      currentLang = currentLang === "en" ? "ar" : "en";
      updateLang(currentLang);
      langBtn.textContent = currentLang === "en" ? "ğŸŒ Ø¹Ø±Ø¨ÙŠ" : "ğŸŒ English";
    });

    updateLang(currentLang);

    // ========= Google Sheets Integration =========
    async function loadSheet(sheetName) {
      const url = `https://docs.google.com/spreadsheets/d/${currentSheetID}/gviz/tq?tqx=out:json&sheet=${sheetName}`;
      const res = await fetch(url);
      const text = await res.text();
      const json = JSON.parse(text.substring(47).slice(0, -2));

      return json.table.rows
        .map(r => r.c.map(c => c ? (c.f ?? c.v ?? "") : ""))
        .filter(row => row.some(cell => cell !== ""));
    }

    function loadAllData() {
      // Load News
      let allNews = [];
      loadSheet("News").then(rows => {
        const newsList = document.getElementById("newsList");
        allNews = rows;
        renderNews(rows);

        document.getElementById("searchNews").addEventListener("input", e => {
          const q = e.target.value.toLowerCase();
          const filtered = allNews.filter(r => (r[0] + " " + r[1]).toLowerCase().includes(q));
          renderNews(filtered);
        });

        function renderNews(list) {
          newsList.innerHTML = "";
          list.forEach(r => {
            if (r[0]) {
              const card = document.createElement("div");
              card.className = "news-card bg-white shadow-lg rounded-2xl p-4";
              card.innerHTML = `<h3 class="font-semibold">${r[0]}</h3><p class="text-gray-600 mt-2">${r[1]}</p>`;
              newsList.appendChild(card);
            }
          });
        }
      });

      // Load Schedule
      loadSheet("Schedule").then(rows => {
        const body = document.querySelector("#schedule tbody");
        body.innerHTML = "";
        rows.forEach(r => {
          body.innerHTML += `
            <tr class="border-b">
              <td class="py-2 px-4 text-center">${r[0]}</td>
              <td class="py-2 px-4 text-center">${r[1]}</td>
              <td class="py-2 px-4 text-center">${r[2]}</td>
            </tr>
          `;
        });
      });

      // Load Deadlines
      loadSheet("Deadlines").then(rows => {
        const body = document.querySelector("#deadlines tbody");
        body.innerHTML = "";
        rows.forEach(r => {
          body.innerHTML += `
            <tr class="border-b">
              <td class="py-2 px-4 text-center">${r[0]}</td>
              <td class="py-2 px-4 text-center">${r[1]}</td>
              <td class="py-2 px-4 text-center">${r[2]}</td>
            </tr>
          `;
        });
      });
    }

    loadAllData();
   
    if ("serviceWorker" in navigator) {
       navigator.serviceWorker.register("sw.js")
      .then(() => console.log("Service Worker registered"))
      .catch(err => console.log("SW registration failed:", err));
     }
  </script>
</body>
</html>




